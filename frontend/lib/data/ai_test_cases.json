{
  "testCases": [
    {
      "id": "ramp-mislabel-cultivate",
      "name": "Ramp mislabeling: Cultivate should not be called creature ramp",
      "type": "chat",
      "input": {
        "userMessage": "What ramp should I run in my Commander deck?",
        "format": "Commander"
      },
      "expectedChecks": {
        "shouldContain": ["ramp", "Cultivate"],
        "shouldNotContain": ["creature ramp", "Cultivate.*creature", "Cultivate.*dork"],
        "shouldMentionCard": ["Cultivate", "Kodama's Reach"],
        "formatSpecific": true
      },
      "tags": ["ramp", "mislabeling", "commander"],
      "source": "curated"
    },
    {
      "id": "ramp-fabled-passage-not-ramp",
      "name": "Fabled Passage should not be presented as ramp",
      "type": "chat",
      "input": {
        "userMessage": "Is Fabled Passage ramp?",
        "format": "Commander"
      },
      "expectedChecks": {
        "shouldNotContain": ["Fabled Passage.*ramp", "ramp.*Fabled Passage"],
        "shouldContain": ["color fixing", "fetch", "land"]
      },
      "tags": ["ramp", "mislabeling", "lands"],
      "source": "curated"
    },
    {
      "id": "color-identity-violation",
      "name": "Should not suggest off-color cards",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze this deck and suggest improvements",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n1 Lightning Bolt\n1 Counterspell\n1 Swamp\n1 Mountain",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "requireLegalIdentity": true,
        "shouldNotMentionCard": ["Counterspell", "Swamp"],
        "shouldContain": ["red", "color identity"]
      },
      "tags": ["color-identity", "commander", "validation"],
      "source": "curated"
    },
    {
      "id": "banned-card-without-warning",
      "name": "Should call out banned cards with alternatives",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest ramp for my Commander deck",
        "deckText": "1 Sol Ring\n38 Mountain",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "requireLegalIdentity": true,
        "shouldNotMentionCard": ["Golos, Tireless Pilgrim", "Primeval Titan", "Prophet of Kruphix"]
      },
      "tags": ["banned", "commander", "legality"],
      "source": "curated"
    },
    {
      "id": "banned-card-with-alternative",
      "name": "Should mention banned card is banned and suggest alternative",
      "type": "deck_analysis",
      "input": {
        "userMessage": "What's a good land tutor for Commander?",
        "deckText": "1 Sol Ring\n38 Forest",
        "format": "Commander",
        "commander": "Omnath, Locus of Rage",
        "colors": ["G", "R"]
      },
      "expectedChecks": {
        "requireLegalIdentity": true,
        "shouldContain": ["banned", "alternative", "instead"]
      },
      "tags": ["banned", "commander", "legality"],
      "source": "curated"
    },
    {
      "id": "fast-mana-casual-deck",
      "name": "Should not suggest fast mana for casual decks",
      "type": "deck_analysis",
      "input": {
        "userMessage": "What ramp should I add?",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n38 Mountain\n1 Lightning Bolt",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"],
        "context": { "powerLevel": "casual" }
      },
      "expectedChecks": {
        "shouldNotMentionCard": ["Mana Crypt", "Jeweled Lotus", "Mox Diamond"],
        "shouldMentionCard": ["Arcane Signet", "Fellwar Stone", "Mind Stone"]
      },
      "tags": ["ramp", "power-level", "budget"],
      "source": "curated"
    },
    {
      "id": "commander-land-floor",
      "name": "Should warn about low land count in Commander",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze this deck",
        "deckText": "1 Sol Ring\n30 Mountain\n1 Lightning Bolt",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "shouldContain": ["land", "34", "mana"],
        "minLength": 50
      },
      "tags": ["lands", "commander", "fundamentals"],
      "source": "curated"
    },
    {
      "id": "teaching-mode-depth",
      "name": "Teaching mode should provide 3-part answer",
      "type": "chat",
      "input": {
        "userMessage": "What is ramp?",
        "format": "Commander",
        "context": { "teaching": true }
      },
      "expectedChecks": {
        "shouldContain": ["concept", "examples", "application"],
        "minLength": 200
      },
      "tags": ["teaching", "format", "depth"],
      "source": "curated"
    },
    {
      "id": "banned-card-suggestion",
      "name": "Should not suggest banned cards",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest removal for my Commander deck",
        "deckText": "1 Sol Ring\n38 Mountain",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "shouldNotMentionCard": ["Primeval Titan", "Prophet of Kruphix", "Sundering Titan"]
      },
      "tags": ["banned", "commander", "validation"],
      "source": "curated"
    },
    {
      "id": "format-specific-vocabulary",
      "name": "Should use format-appropriate examples",
      "type": "chat",
      "input": {
        "userMessage": "What are good removal spells?",
        "format": "Modern"
      },
      "expectedChecks": {
        "shouldMentionCard": ["Lightning Bolt", "Path to Exile", "Fatal Push"],
        "shouldNotMentionCard": ["Sol Ring", "Command Tower"]
      },
      "tags": ["format", "vocabulary", "modern"],
      "source": "curated"
    },
    {
      "id": "budget-awareness",
      "name": "Should acknowledge budget constraints",
      "type": "chat",
      "input": {
        "userMessage": "Suggest budget upgrades under $50",
        "format": "Commander"
      },
      "expectedChecks": {
        "shouldContain": ["budget", "affordable", "cheap"],
        "shouldNotMentionCard": ["Mana Crypt", "Jeweled Lotus"]
      },
      "tags": ["budget", "price", "accessibility"],
      "source": "curated"
    },
    {
      "id": "commander-archetype-respect",
      "name": "Should respect commander archetype",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest cards for my deck",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n38 Forest\n1 Llanowar Elves",
        "format": "Commander",
        "commander": "Henzie 'Toolbox' Torre",
        "colors": ["B", "R", "G"]
      },
      "expectedChecks": {
        "shouldContain": ["permanent", "ETB", "dies"],
        "shouldNotMentionCard": ["Lightning Bolt", "Counterspell"]
      },
      "tags": ["commander", "archetype", "synergy"],
      "source": "curated"
    },
    {
      "id": "ramp-categorization",
      "name": "Should correctly categorize ramp types",
      "type": "chat",
      "input": {
        "userMessage": "What types of ramp are there?",
        "format": "Commander"
      },
      "expectedChecks": {
        "shouldContain": ["land-based", "mana rocks", "mana dorks"],
        "shouldMentionCard": ["Cultivate", "Sol Ring", "Llanowar Elves"]
      },
      "tags": ["ramp", "categorization", "education"],
      "source": "curated"
    },
    {
      "id": "color-strengths-weaknesses",
      "name": "Should mention color strengths and weaknesses",
      "type": "chat",
      "input": {
        "userMessage": "What are the strengths of red in Commander?",
        "format": "Commander"
      },
      "expectedChecks": {
        "shouldContain": ["damage", "aggression", "artifact"],
        "shouldNotContain": ["card draw", "long-game"]
      },
      "tags": ["color-identity", "education"],
      "source": "curated"
    },
    {
      "id": "deck-analysis-structure",
      "name": "Deck analysis should mention fundamentals",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n35 Mountain\n1 Lightning Bolt",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "shouldContain": ["ramp", "draw", "removal", "lands"],
        "minLength": 100
      },
      "tags": ["deck-analysis", "fundamentals", "structure"],
      "source": "curated"
    },
    {
      "id": "no-overpromising",
      "name": "Should avoid overconfident language",
      "type": "chat",
      "input": {
        "userMessage": "Is Sol Ring an auto-include?",
        "format": "Commander"
      },
      "expectedChecks": {
        "shouldNotContain": ["auto-include", "must-run", "always"],
        "shouldContain": ["commonly", "strong", "option"]
      },
      "tags": ["tone", "overpromising", "language"],
      "source": "curated"
    },
    {
      "id": "opinionated-ranges",
      "name": "Should present ranges when communities disagree",
      "type": "chat",
      "input": {
        "userMessage": "How many lands should I run?",
        "format": "Commander"
      },
      "expectedChecks": {
        "shouldContain": ["range", "36", "38", "42", "tuned"],
        "minLength": 50
      },
      "tags": ["lands", "opinionated", "ranges"],
      "source": "curated"
    },
    {
      "id": "tokens-archetype-recognition",
      "name": "Tokens deck: Should identify go-wide token strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n1 Parallel Lives\n1 Anointed Procession\n1 Secure the Wastes\n1 Raise the Alarm\n35 Plains\n1 Trostani, Selesnya's Voice",
        "format": "Commander",
        "commander": "Trostani, Selesnya's Voice",
        "colors": ["G", "W"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "requireSynergy": true,
        "shouldContain": ["token", "go-wide"],
        "minLength": 150
      },
      "tags": ["archetype", "tokens", "selesnya", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "tokens-synergy-chain",
      "name": "Tokens deck: Should explain synergy chains",
      "type": "deck_analysis",
      "input": {
        "userMessage": "What cards work well together?",
        "deckText": "1 Parallel Lives\n1 Anointed Procession\n1 Doubling Season\n1 Secure the Wastes\n1 March of the Multitudes\n35 Forest\n1 Rhys the Redeemed",
        "format": "Commander",
        "commander": "Rhys the Redeemed",
        "colors": ["G", "W"]
      },
      "expectedChecks": {
        "requireSynergy": true,
        "shouldContain": ["doubles", "works well", "together"],
        "minLength": 100
      },
      "tags": ["archetype", "tokens", "synergy"],
      "source": "curated"
    },
    {
      "id": "aristocrats-plan-recognition",
      "name": "Aristocrats deck: Should identify sacrifice strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Viscera Seer\n1 Zulaport Cutthroat\n1 Blood Artist\n1 Carrion Feeder\n35 Swamp\n1 Teysa, Orzhov Scion",
        "format": "Commander",
        "commander": "Teysa, Orzhov Scion",
        "colors": ["B", "W"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "requireProblemsFirst": true,
        "shouldContain": ["aristocrat", "sacrifice", "sac outlet"],
        "minLength": 150
      },
      "tags": ["archetype", "aristocrats", "orzhov", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "aristocrats-synergy",
      "name": "Aristocrats deck: Should connect sac outlets and payoffs",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest improvements",
        "deckText": "1 Viscera Seer\n1 Zulaport Cutthroat\n1 Blood Artist\n35 Swamp\n1 Ayara, First of Locthwain",
        "format": "Commander",
        "commander": "Ayara, First of Locthwain",
        "colors": ["B"]
      },
      "expectedChecks": {
        "requireSynergy": true,
        "shouldContain": ["triggers", "when", "dies", "sacrifice"],
        "minLength": 100
      },
      "tags": ["archetype", "aristocrats", "synergy"],
      "source": "curated"
    },
    {
      "id": "landfall-archetype",
      "name": "Landfall deck: Should identify landfall strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Rampaging Baloths\n1 Avenger of Zendikar\n1 Tireless Tracker\n1 Lotus Cobra\n35 Forest\n1 Omnath, Locus of Rage",
        "format": "Commander",
        "commander": "Omnath, Locus of Rage",
        "colors": ["G", "R"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["landfall", "land enters"],
        "minLength": 150
      },
      "tags": ["archetype", "landfall", "gruul", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "lifegain-archetype",
      "name": "Lifegain deck: Should identify lifegain strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Soul Warden\n1 Ajani's Pridemate\n1 Heliod, Sun-Crowned\n1 Authority of the Consuls\n35 Plains\n1 Oloro, Ageless Ascetic",
        "format": "Commander",
        "commander": "Oloro, Ageless Ascetic",
        "colors": ["W", "U", "B"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["lifegain", "life"],
        "minLength": 150
      },
      "tags": ["archetype", "lifegain", "orzhov", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "enchantress-archetype",
      "name": "Enchantress deck: Should identify enchantment strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Enchantress's Presence\n1 Argothian Enchantress\n1 Sythis, Harvest's Hand\n1 Sterling Grove\n35 Forest\n1 Sythis, Harvest's Hand",
        "format": "Commander",
        "commander": "Sythis, Harvest's Hand",
        "colors": ["G", "W"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["enchantress", "enchantment"],
        "minLength": 150
      },
      "tags": ["archetype", "enchantress", "selesnya", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "spellslinger-archetype",
      "name": "Spellslinger deck: Should identify spell-based strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Guttersnipe\n1 Young Pyromancer\n1 Talrand, Sky Summoner\n1 Baral, Chief of Compliance\n35 Island\n1 Niv-Mizzet, Parun",
        "format": "Commander",
        "commander": "Niv-Mizzet, Parun",
        "colors": ["U", "R"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["spellslinger", "spell", "instant", "sorcery"],
        "minLength": 150
      },
      "tags": ["archetype", "spellslinger", "izzet", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "graveyard-reanimator-archetype",
      "name": "Graveyard deck: Should identify reanimator strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Entomb\n1 Reanimate\n1 Animate Dead\n1 Meren of Clan Nel Toth\n35 Swamp\n1 Meren of Clan Nel Toth",
        "format": "Commander",
        "commander": "Meren of Clan Nel Toth",
        "colors": ["B", "G"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["graveyard", "reanimator", "recursion"],
        "minLength": 150
      },
      "tags": ["archetype", "graveyard", "golgari", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "blink-flicker-archetype",
      "name": "Blink deck: Should identify ETB/flicker strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Cloudshift\n1 Ephemerate\n1 Restoration Angel\n1 Mulldrifter\n35 Plains\n1 Brago, King Eternal",
        "format": "Commander",
        "commander": "Brago, King Eternal",
        "colors": ["W", "U"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["blink", "flicker", "ETB", "enters the battlefield"],
        "minLength": 150
      },
      "tags": ["archetype", "blink", "azorius", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "voltron-archetype",
      "name": "Voltron deck: Should identify tall/equipment strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Lightning Greaves\n1 Swiftfoot Boots\n1 Sword of Fire and Ice\n1 Colossus Hammer\n35 Mountain\n1 Zurgo Helmsmasher",
        "format": "Commander",
        "commander": "Zurgo Helmsmasher",
        "colors": ["R", "W", "B"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["voltron", "equipment", "tall"],
        "minLength": 150
      },
      "tags": ["archetype", "voltron", "boros", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "control-archetype",
      "name": "Control deck: Should identify control strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Counterspell\n1 Swords to Plowshares\n1 Wrath of God\n1 Teferi, Hero of Dominaria\n35 Island\n1 Grand Arbiter Augustin IV",
        "format": "Commander",
        "commander": "Grand Arbiter Augustin IV",
        "colors": ["W", "U"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["control", "interaction", "removal"],
        "minLength": 150
      },
      "tags": ["archetype", "control", "azorius", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "midrange-archetype",
      "name": "Midrange deck: Should identify midrange strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Bloodbraid Elf\n1 Tarmogoyf\n1 Lightning Bolt\n1 Thoughtseize\n35 Forest\n1 Prossh, Skyraider of Kher",
        "format": "Commander",
        "commander": "Prossh, Skyraider of Kher",
        "colors": ["B", "R", "G"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["midrange", "value"],
        "minLength": 150
      },
      "tags": ["archetype", "midrange", "jund", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "combo-archetype",
      "name": "Combo deck: Should identify combo strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Kiki-Jiki, Mirror Breaker\n1 Zealous Conscripts\n1 Pestermite\n1 Deceiver Exarch\n35 Mountain\n1 Kiki-Jiki, Mirror Breaker",
        "format": "Commander",
        "commander": "Kiki-Jiki, Mirror Breaker",
        "colors": ["R"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["combo", "infinite"],
        "minLength": 150
      },
      "tags": ["archetype", "combo", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "problems-first-structure",
      "name": "Should list problems before solutions",
      "type": "deck_analysis",
      "input": {
        "userMessage": "What's wrong with my deck?",
        "deckText": "1 Sol Ring\n25 Mountain\n1 Lightning Bolt",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "requireProblemsFirst": true,
        "shouldContain": ["problem", "issue", "lacks", "missing"],
        "minLength": 100
      },
      "tags": ["structure", "problems-first"],
      "source": "curated"
    },
    {
      "id": "low-ramp-problems",
      "name": "Should flag low ramp as a problem",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n38 Mountain\n1 Lightning Bolt",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "requireProblemsFirst": true,
        "shouldContain": ["ramp", "mana", "problem", "issue"],
        "minLength": 100
      },
      "tags": ["ramp", "problems-first"],
      "source": "curated"
    },
    {
      "id": "consistency-ramp-count",
      "name": "Should be consistent with ramp count guidelines",
      "type": "deck_analysis",
      "input": {
        "userMessage": "How much ramp should I run?",
        "deckText": "1 Sol Ring\n38 Mountain",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "requireConsistency": true,
        "shouldContain": ["8", "12", "ramp"],
        "minLength": 100
      },
      "tags": ["consistency", "ramp"],
      "source": "curated"
    },
    {
      "id": "budget-casual-tone",
      "name": "Should match casual/budget tone",
      "type": "deck_analysis",
      "input": {
        "userMessage": "I'm building a casual budget deck, what should I add?",
        "deckText": "1 Sol Ring\n38 Mountain",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"],
        "context": { "powerLevel": "casual", "budget": true }
      },
      "expectedChecks": {
        "requireBudgetAwareness": true,
        "requireToneMatch": true,
        "shouldNotMentionCard": ["Mana Crypt", "Jeweled Lotus"],
        "shouldContain": ["budget", "casual", "affordable"],
        "minLength": 100
      },
      "tags": ["budget", "tone", "casual"],
      "source": "curated"
    },
    {
      "id": "competitive-tone",
      "name": "Should match competitive/tuned tone",
      "type": "deck_analysis",
      "input": {
        "userMessage": "I want to tune this for competitive play",
        "deckText": "1 Sol Ring\n38 Mountain",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"],
        "context": { "powerLevel": "competitive" }
      },
      "expectedChecks": {
        "requireToneMatch": true,
        "shouldContain": ["efficient", "interaction", "resilient", "optimize"],
        "minLength": 100
      },
      "tags": ["tone", "competitive"],
      "source": "curated"
    },
    {
      "id": "specificity-concrete-cards",
      "name": "Should include concrete card suggestions",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest improvements",
        "deckText": "1 Sol Ring\n38 Mountain\n1 Lightning Bolt",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "requireSpecificity": true,
        "minLength": 200
      },
      "tags": ["specificity", "concrete-cards"],
      "source": "curated"
    },
    {
      "id": "stax-archetype",
      "name": "Stax deck: Should identify stax strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Winter Orb\n1 Static Orb\n1 Smokestack\n1 Tangle Wire\n35 Plains\n1 Grand Arbiter Augustin IV",
        "format": "Commander",
        "commander": "Grand Arbiter Augustin IV",
        "colors": ["W", "U"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["stax", "resource denial"],
        "minLength": 150
      },
      "tags": ["archetype", "stax", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "treasure-artifact-archetype",
      "name": "Treasure/Artifact deck: Should identify artifact strategy",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Smothering Tithe\n1 Dockside Extortionist\n1 Revel in Riches\n1 Brass's Bounty\n35 Island\n1 Prosper, Tome-Bound",
        "format": "Commander",
        "commander": "Prosper, Tome-Bound",
        "colors": ["B", "R"]
      },
      "expectedChecks": {
        "requireDeckStyle": true,
        "shouldContain": ["treasure", "artifact"],
        "minLength": 150
      },
      "tags": ["archetype", "treasure", "artifact", "plan-recognition"],
      "source": "curated"
    },
    {
      "id": "legality-001",
      "name": "Prosper should not suggest white cards",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest improvements for my deck",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n1 Dockside Extortionist\n35 Mountain\n1 Prosper, Tome-Bound",
        "format": "Commander",
        "commander": "Prosper, Tome-Bound",
        "colors": ["B", "R"]
      },
      "expectedChecks": {
        "requireLegalIdentity": true,
        "shouldNotMentionCard": ["Swords to Plowshares", "Path to Exile", "Smothering Tithe", "Teferi's Protection"],
        "shouldContain": ["color identity", "black", "red"]
      },
      "tags": ["legality", "color-identity", "commander"],
      "source": "curated"
    },
    {
      "id": "legality-002",
      "name": "Should not suggest banned cards like Hullbreacher",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest card draw for my deck",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n35 Island\n1 Talrand, Sky Summoner",
        "format": "Commander",
        "commander": "Talrand, Sky Summoner",
        "colors": ["U"]
      },
      "expectedChecks": {
        "shouldNotMentionCard": ["Hullbreacher", "Lutri, the Spellchaser"],
        "shouldContain": ["banned", "alternative"]
      },
      "tags": ["legality", "banned", "commander"],
      "source": "curated"
    },
    {
      "id": "legality-003",
      "name": "Standard deck should not suggest non-Standard cards",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest removal for my Standard deck",
        "deckText": "1 Lightning Bolt\n1 Counterspell\n22 Mountain\n1 Ragavan, Nimble Pilferer",
        "format": "Standard"
      },
      "expectedChecks": {
        "shouldNotMentionCard": ["Lightning Bolt", "Counterspell", "Sol Ring", "Command Tower"],
        "shouldMentionCard": ["Cut Down", "Go for the Throat", "Play with Fire"]
      },
      "tags": ["legality", "format", "standard"],
      "source": "curated"
    },
    {
      "id": "legality-004",
      "name": "Should avoid silver-border and acorn cards",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest cards for my deck",
        "deckText": "1 Sol Ring\n38 Forest\n1 Omnath, Locus of Rage",
        "format": "Commander",
        "commander": "Omnath, Locus of Rage",
        "colors": ["G", "R"]
      },
      "expectedChecks": {
        "shouldNotMentionCard": ["Gleemax", "Richard Garfield, Ph.D.", "Booster Tutor"],
        "shouldNotContain": ["silver border", "acorn", "un-set"]
      },
      "tags": ["legality", "silver-border", "acorn"],
      "source": "curated"
    },
    {
      "id": "duplicate-001",
      "name": "Should not recommend same card twice",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest 5 ramp cards",
        "deckText": "1 Sol Ring\n38 Mountain\n1 Chandra, Fire of Kaladesh",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "requireSpecificity": true,
        "minLength": 100
      },
      "tags": ["duplicate", "suggestions"],
      "source": "curated"
    },
    {
      "id": "duplicate-002",
      "name": "Should not suggest cards already in decklist",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest improvements",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n1 Lightning Bolt\n1 Counterspell\n35 Mountain\n1 Chandra, Fire of Kaladesh",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "shouldNotMentionCard": ["Sol Ring", "Arcane Signet", "Lightning Bolt"],
        "minLength": 100
      },
      "tags": ["duplicate", "decklist"],
      "source": "curated"
    },
    {
      "id": "pillars-001",
      "name": "Should correctly count ramp/draw/removal",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n1 Cultivate\n1 Read the Bones\n1 Swords to Plowshares\n1 Path to Exile\n35 Plains\n1 Giada, Font of Hope",
        "format": "Commander",
        "commander": "Giada, Font of Hope",
        "colors": ["W"]
      },
      "expectedChecks": {
        "shouldContain": ["ramp", "draw", "removal"],
        "minLength": 150
      },
      "tags": ["pillars", "counting", "fundamentals"],
      "source": "curated"
    },
    {
      "id": "pillars-002",
      "name": "Should flag deck with only 1 ramp as insufficient",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n38 Mountain\n1 Lightning Bolt\n1 Chandra, Fire of Kaladesh",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "requireProblemsFirst": true,
        "shouldContain": ["ramp", "problem", "insufficient", "low"],
        "shouldNotContain": ["enough ramp", "sufficient ramp", "adequate ramp"],
        "minLength": 100
      },
      "tags": ["pillars", "ramp", "problems"],
      "source": "curated"
    },
    {
      "id": "pillars-003",
      "name": "Should not ignore missing draw or removal",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n1 Cultivate\n1 Kodama's Reach\n38 Forest\n1 Omnath, Locus of Rage",
        "format": "Commander",
        "commander": "Omnath, Locus of Rage",
        "colors": ["G", "R"]
      },
      "expectedChecks": {
        "requireProblemsFirst": true,
        "shouldContain": ["draw", "removal", "problem", "missing"],
        "minLength": 100
      },
      "tags": ["pillars", "draw", "removal", "problems"],
      "source": "curated"
    },
    {
      "id": "synergy-commander-001",
      "name": "Suggestions must tie to commander abilities",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest cards for my deck",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n35 Forest\n1 Yisan, the Wanderer Bard",
        "format": "Commander",
        "commander": "Yisan, the Wanderer Bard",
        "colors": ["G"]
      },
      "expectedChecks": {
        "requireSynergy": true,
        "shouldContain": ["Yisan", "creature", "verse counter", "tutor"],
        "shouldNotContain": ["supports your plan", "works well", "good card"],
        "minLength": 150
      },
      "tags": ["synergy", "commander", "specificity"],
      "source": "curated"
    },
    {
      "id": "synergy-commander-002",
      "name": "Fail if synergy explanation is generic",
      "type": "deck_analysis",
      "input": {
        "userMessage": "What cards work with my commander?",
        "deckText": "1 Sol Ring\n1 Viscera Seer\n1 Blood Artist\n35 Swamp\n1 Teysa Karlov",
        "format": "Commander",
        "commander": "Teysa Karlov",
        "colors": ["B", "W"]
      },
      "expectedChecks": {
        "requireSynergy": true,
        "shouldNotContain": ["supports your plan", "works well together", "good synergy", "fits the theme"],
        "shouldContain": ["triggers", "dies", "death", "doubles"],
        "minLength": 100
      },
      "tags": ["synergy", "generic", "explanation"],
      "source": "curated"
    },
    {
      "id": "synergy-commander-003",
      "name": "Require trigger chain explanation",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Explain how these cards work together",
        "deckText": "1 Sol Ring\n1 Parallel Lives\n1 Secure the Wastes\n35 Forest\n1 Rhys the Redeemed",
        "format": "Commander",
        "commander": "Rhys the Redeemed",
        "colors": ["G", "W"]
      },
      "expectedChecks": {
        "requireSynergy": true,
        "shouldContain": ["doubles", "creates", "when", "enters", "trigger"],
        "minLength": 150
      },
      "tags": ["synergy", "trigger-chain", "explanation"],
      "source": "curated"
    },
    {
      "id": "intent-001",
      "name": "User asks for cheap removal under £1",
      "type": "chat",
      "input": {
        "userMessage": "Suggest removal spells under £1 for my Commander deck",
        "format": "Commander"
      },
      "expectedChecks": {
        "requireBudgetAwareness": true,
        "shouldMentionCard": ["Swords to Plowshares", "Path to Exile", "Go for the Throat"],
        "shouldNotMentionCard": ["Force of Will", "Cyclonic Rift", "Fierce Guardianship"],
        "shouldContain": ["budget", "cheap", "affordable"],
        "minLength": 100
      },
      "tags": ["intent", "budget", "removal"],
      "source": "curated"
    },
    {
      "id": "intent-002",
      "name": "User asks for fast-meta early interaction",
      "type": "chat",
      "input": {
        "userMessage": "I need fast early interaction for a competitive meta",
        "format": "Commander",
        "context": { "powerLevel": "competitive" }
      },
      "expectedChecks": {
        "shouldMentionCard": ["Mental Misstep", "Force of Will", "Fierce Guardianship", "Daze"],
        "shouldContain": ["early", "interaction", "fast", "competitive"],
        "shouldNotContain": ["casual", "budget"],
        "minLength": 100
      },
      "tags": ["intent", "competitive", "interaction"],
      "source": "curated"
    },
    {
      "id": "intent-003",
      "name": "User asks for exactly 3 cards",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest exactly 3 ramp cards for my deck",
        "deckText": "1 Sol Ring\n38 Mountain\n1 Chandra, Fire of Kaladesh",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "requireSpecificity": true,
        "shouldMentionCard": ["Arcane Signet", "Fellwar Stone", "Mind Stone"],
        "minLength": 100,
        "maxLength": 500
      },
      "tags": ["intent", "specificity", "count"],
      "source": "curated"
    },
    {
      "id": "combo-001",
      "name": "Detect nonsense combos",
      "type": "chat",
      "input": {
        "userMessage": "Does Lightning Bolt and Counterspell create an infinite combo?",
        "format": "Commander"
      },
      "expectedChecks": {
        "shouldNotContain": ["infinite", "combo", "loop", "win"],
        "shouldContain": ["no", "not", "don't work"],
        "minLength": 50
      },
      "tags": ["combo", "nonsense", "validation"],
      "source": "curated"
    },
    {
      "id": "combo-002",
      "name": "Fail if bot suggests impossible loops",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest combos for my deck",
        "deckText": "1 Sol Ring\n1 Lightning Bolt\n1 Counterspell\n35 Island\n1 Talrand, Sky Summoner",
        "format": "Commander",
        "commander": "Talrand, Sky Summoner",
        "colors": ["U"]
      },
      "expectedChecks": {
        "shouldNotContain": ["Lightning Bolt.*Counterspell.*infinite", "infinite.*Lightning Bolt.*Counterspell"],
        "minLength": 100
      },
      "tags": ["combo", "impossible", "validation"],
      "source": "curated"
    },
    {
      "id": "budget-bundle-001",
      "name": "User asks for £30 upgrade bundle",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest a £30 upgrade bundle for my deck",
        "deckText": "1 Sol Ring\n1 Arcane Signet\n38 Forest\n1 Omnath, Locus of Rage",
        "format": "Commander",
        "commander": "Omnath, Locus of Rage",
        "colors": ["G", "R"],
        "context": { "budget": 30 }
      },
      "expectedChecks": {
        "requireBudgetAwareness": true,
        "requireSpecificity": true,
        "shouldMentionCard": ["Cultivate", "Kodama's Reach", "Rampaging Baloths", "Avenger of Zendikar"],
        "shouldNotMentionCard": ["Mana Crypt", "Jeweled Lotus", "Gaea's Cradle"],
        "shouldContain": ["budget", "upgrade", "bundle"],
        "minLength": 150
      },
      "tags": ["budget", "bundle", "upgrade"],
      "source": "curated"
    },
    {
      "id": "budget-bundle-002",
      "name": "Must include 3-5 budget pieces that synergize",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Suggest budget upgrades that work together",
        "deckText": "1 Sol Ring\n1 Viscera Seer\n1 Blood Artist\n35 Swamp\n1 Teysa Karlov",
        "format": "Commander",
        "commander": "Teysa Karlov",
        "colors": ["B", "W"],
        "context": { "budget": true }
      },
      "expectedChecks": {
        "requireSynergy": true,
        "requireBudgetAwareness": true,
        "shouldMentionCard": ["Zulaport Cutthroat", "Carrion Feeder", "Falkenrath Noble", "Pawn of Ulamog"],
        "shouldContain": ["synergy", "work together", "triggers"],
        "minLength": 150
      },
      "tags": ["budget", "bundle", "synergy"],
      "source": "curated"
    },
    {
      "id": "edge-case-001",
      "name": "Empty decklist should not hallucinate archetype",
      "type": "deck_analysis",
      "input": {
        "userMessage": "Analyze my deck",
        "deckText": "1 Sol Ring",
        "format": "Commander",
        "commander": "Chandra, Fire of Kaladesh",
        "colors": ["R"]
      },
      "expectedChecks": {
        "shouldContain": ["land", "ramp", "draw", "removal"],
        "shouldNotContain": ["tokens", "aristocrats", "combo", "control"],
        "minLength": 100
      },
      "tags": ["edge-case", "empty", "hallucination"],
      "source": "curated"
    }
  ]
}

